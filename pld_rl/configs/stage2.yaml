# Stage 2: PLD Data Collection Configuration
# This config is used by scripts/collect_pld_stage2.py

# === Base Policy ===
base_policy_path: "./outputs/pi05_base_sft"
base_chunk_size: 50
base_n_action_steps: 10  # Match lerobot-eval default (not 50!)

# === Environment ===
env_name: "libero_10"
task_id: 0
env_max_steps: 500
action_dim: 7
state_dim: 8  # pos:3 + axis_angle:3 + gripper:2 (lerobot convention)

# === Residual Policy (for loading checkpoint) ===
residual_hidden_dims:
  - 256
  - 256
  - 256
residual_std_min: 1.0e-5
residual_std_max: 5.0

# === Cal-QL (unused in stage 2, kept for config parity) ===
calql_num_policy_actions: 10
calql_alpha: 1.0
calql_lse_beta: 1.0
calql_td_xi: 0.0
calql_conservative_xi: 0.05

# === PLD Collection ===
pld_num_episodes: 500
pld_alpha: 0.5  # T_base ~ Uniform(0, alpha * T_max)
xi_final: 0.1   # Final residual scale for data collection

# === Encoder ===
use_latent_encoder: true
latent_dim: 256
freeze_encoder: true
encoder_type: "serl_resnet10"
serl_resnet10_weights: "~/.serl/resnet10_params.pkl"
serl_resnet10_image_size: 128
serl_resnet10_num_spatial_blocks: 8
serl_resnet10_auto_download: true
serl_resnet10_log_keys: false

# === PI05 Specific ===
tokenizer_max_length: 200

# === Output ===
output_dir: "./outputs/pld_rl_stage2"
seed: 42
device: "cuda"
